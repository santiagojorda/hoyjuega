$('#aa-search-input').focusin(function(){$('#mobsearchVisual').show();$(this).addClass('bigger');});$('#mobsearchVisual .closeSub').click(function(){$('#mobsearchVisual').hide();});$('#aa-search-input').on('input',function(){strL=$(this).val();if(strL.length>0){$('#mobsearchVisual').hide()}});$(document).mouseup(function(e)
{var containerVisSearch=$("#mobsearchVisual, #aa-search-input, .add-nav");if(!containerVisSearch.is(e.target)&&containerVisSearch.has(e.target).length===0)
{$("#mobsearchVisual").hide();$('#aa-search-input').removeClass('bigger');$(".add-nav").removeClass('active');$(".hasSubmenu").removeClass('on');}});$('#bb-search-input').focusin(function(){});$('#aa-search-input, #bb-search-input').keyup(function(e){if(e.keyCode==13)
{CURRurl=""+window.location+"";urlPos=CURRurl.indexOf("footballcritic.com/nl");if(urlPos>-1){window.location="/nl/search?q="+$(this).val();}else{window.location="/search?q="+$(this).val();}}});$('#homeSearch').click(function(){CURRurl=""+window.location+"";urlPos=CURRurl.indexOf("footballcritic.com/nl");if(urlPos>-1){window.location="/nl/search?q="+$("#bb-search-input").val();}else{window.location="/search?q="+$("#bb-search-input").val();}});function foreSearch(){if($('#homeSearch').length){$('#homeSearch').click();}else{CURRurl=""+window.location+"";urlPos=CURRurl.indexOf("footballcritic.com/nl");if(urlPos>-1){window.location="/nl/search?q="+$("#aa-search-input").val();}else{window.location="/search?q="+$("#aa-search-input").val();}}}
var client=algoliasearch('CV2NX8I42K','c2f88018ba38421828d1f2109df8e004')
var index=client.initIndex('players_filter_v2');var index2=client.initIndex('team_db_v2');var index3=client.initIndex('comp_db');$('#aa-search-input, #bb-search-input').autocomplete({hint:false},[{source:$.fn.autocomplete.sources.hits(index2,{hitsPerPage:6}),displayKey:'title, description, link',templates:{header:function(data,response){tmpResults=response.hits;anyResults=false;if($.isArray(tmpResults)){for(m=0;m<tmpResults.length;m++){if(parseInt(tmpResults[m].ranking)>0){anyResults=true;}}}
tmpHead='';totalTmp=response.nbHits;if(totalTmp>99){totalTmp="99+";}
if(anyResults==true){tmpHead='<div class="aa-search-head">Teams ('+totalTmp+') <a onclick="foreSearch()" class="btn small rightside">More</a></div>';}else{tmpHead='<div class="aa-search-head">Teams ('+totalTmp+') <a onclick="foreSearch()" class="btn small rightside">Show them</a></div>';}
return tmpHead;},suggestion:function(searchData){data=searchData;$plPic="https://www.footballcritic.com/images/no_player4.png";if(data.logo!=""){$plPic=data.logo;}
if(data.ranking=="0"){data.ranking="";data.ranking_class="";}
CURRurl=""+window.location+"";urlPos=CURRurl.indexOf("footballcritic.com/nl");if(urlPos>-1){data.team_url=data.team_url.replace("footballcritic.com","footballcritic.com/nl");}
if(data.ranking>0){return '<span class="photo team"><img src="'+$plPic+'" /></span><span class="player">'+
data._highlightResult.name.value+'</span><span class="fc '+data.ranking_class+'">'+data.ranking+'</span>';}}}},{source:$.fn.autocomplete.sources.hits(index3,{hitsPerPage:6}),displayKey:'title, description, link',templates:{header:function(data,response){totalTmp=response.nbHits;if(totalTmp>6){if(totalTmp>99){totalTmp="99+";}
return '<div class="aa-search-head">Competitions ('+totalTmp+') <a onclick="foreSearch()" class="btn small rightside">More</a></div>';}else{return '<div class="aa-search-head">Competitions ('+totalTmp+')</div>';}},suggestion:function(searchData){data=searchData;cCode=data.code;cCode=cCode.toLowerCase();CURRurl=""+window.location+"";urlPos=CURRurl.indexOf("footballcritic.com/nl");if(urlPos>-1){data.seo_url=data.seo_url.replace("footballcritic.com","footballcritic.com/nl");}
return '<span class="photo team"><i style="margin-top:9px;margin-left:10px;" class="flag flag-'+cCode+'"></i></span><span class="player">'+
data._highlightResult.name.value+'</span>';}}},{source:$.fn.autocomplete.sources.hits(index,{hitsPerPage:8}),displayKey:'title, description, link',templates:{header:function(data,response){totalTmp=response.nbHits;if(totalTmp>8){if(totalTmp>99){totalTmp="99+";}
return '<div class="aa-search-head">Players ('+totalTmp+')  <a onclick="foreSearch()" class="btn small rightside">More</a></div></div>';}else{return '<div class="aa-search-head">Players ('+totalTmp+')</div>';}},suggestion:function(searchData){data=searchData;$plPic="https://www.footballcritic.com/images/no_player4.png";if(data.picture!=""){$plPic=data.picture;}
CURRurl=""+window.location+"";urlPos=CURRurl.indexOf("footballcritic.com/nl");if(urlPos>-1){data.people_url=data.people_url.replace("footballcritic.com","footballcritic.com/nl");}
console.log("xxx: "+data.people_url);if(data.ranking==undefined){if(data.team_name==undefined){strW='<span class="photo"><img src="'+$plPic+'" /></span><span class="player">'+
data._highlightResult.name.value+'</span>';}else{strW='<span class="photo"><img src="'+$plPic+'" /></span><span class="player">'+
data._highlightResult.name.value+'</span><span class="club">('+data._highlightResult.team_name.value+')</span>';}}else{if(data.team_name==undefined){strW='<span class="photo"><img src="'+$plPic+'" /></span><span class="player">'+
data._highlightResult.name.value+'</span><span class="fc '+data.ranking_class+'">'+data.ranking+'</span>';}else{if(data.ranking!='N/A'){strW='<span class="photo"><img src="'+$plPic+'" /></span><span class="player">'+
data._highlightResult.name.value+'</span><span class="club">('+data._highlightResult.team_name.value+')</span><span class="fc '+data.ranking_class+'">'+data.ranking+'</span>';}else{strW='<span class="photo"><img src="'+$plPic+'" /></span><span class="player">'+
data._highlightResult.name.value+'</span><span class="club">('+data._highlightResult.team_name.value+')</span><span style="background-color: #d8d8d8 !important; font-size: 11px !important;" class="fc '+data.ranking_class+'">N/A</span>';}}}
return strW;}}}]).on("autocomplete:selected",function(event,suggestion,dataset){console.log("dataset: "+dataset);if((dataset==1)||(dataset==5)||(dataset==9)){location.href=suggestion.team_url;}
if((dataset==3)||(dataset==7)||(dataset==11)){complUrl=suggestion.people_url;location.href=complUrl;}
if((dataset==2)||(dataset==6)||(dataset==10)){location.href=suggestion.seo_url;}});